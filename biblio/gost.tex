

\DeclareFieldFormat{number}{Is.\ #1}
% biblatex-gost defines \DeclareFieldFormat{number}{No.\ #1} by default.
% The line above resets it to print the ~raw number only~ Issue instead Number (GOST feature).
\DeclareFieldFormat{pages}{P.\ #1}
% For some reason, it does not print "P." in the case of a single page.

\newbibmacro*{my:urldate}{\printtext{(visited on \thefield{urlmonth}/\thefield{urlday}/\thefield{urlyear})}}


\newbibmacro*{my:core}{%
	% 1) Authors
	\printnames{author}%
	\setunit{\addspace/\space}%
	% 2) Title
	\printfield[titlecase]{title}%
	\setunit{\addspace//\space}%
	% 3) Journal
	\iffieldundef{journaltitle}%
		{\printfield[emph]{booktitle}}%
		{\printfield[emph]{journaltitle}}%
	\newunit\newblock%
	% 4) Year
	\printfield{year}%
	\newunit\newblock%
	% 5) Volume / Issue
	\iffieldundef{volume}{}{\printtext{\printfield{volume}}}%
	\iffieldundef{number}{}{\setunit{\addcomma\space}\printtext{\printfield{number}}}%
	\newunit\newblock%
	% 6) Pages
	\iffieldundef{pages}{}{\printtext{\printfield{pages}}}%
}


\newbibmacro*{my:online}{%
	% 1) Authors
	\printnames{author}%
	\setunit{\addspace/\space}%
	% 2) Title [Electronic Resource]
	\printfield[titlecase]{title}\setunit{\space}\printtext{[Electronic Resource]}%
	\newunit\newblock%
	% 3) Year
	\printfield{year}%
	\newunit\newblock%
	% 4) URL
	\printfield{url}\setunit{\space}%
	\usebibmacro{my:urldate}%
}


\newbibmacro*{my:reg}{%
	% 1) Authors
	\printnames{author}%
	\setunit{\addspace/\space}%
	% 2) Title
	\printfield[titlecase]{title}%
	\setunit{\addspace//\space}%
	% 3) Heading
	\printfield[emph]{heading}%
	\newunit\newblock%
	% 4) Reg ID
	\printtext{No. \thefield{requestnumber}, \thefield{publicationmonth}/\thefield{publicationday}/\thefield{publicationyear} (\thefield{prioritycountry})}%
	%\newunit\newblock%
	% 4) URL
	%\printfield{url}\setunit{\space}%
	%\usebibmacro{my:urldate}%
}


% --- Force AUTHOR-FIRST layout ---
\makeatletter
\AtBeginDocument{%
	\DeclareBibliographyDriver{article}{%
		\usebibmacro{bibindex}%
		\usebibmacro{begentry}%
		\usebibmacro{my:core}%  ← your logic
		\usebibmacro{finentry}%
	}%
	\DeclareBibliographyDriver{inproceedings}{%
		\usebibmacro{bibindex}%
		\usebibmacro{begentry}%
		\usebibmacro{my:core}%  ← your logic
		\usebibmacro{finentry}%
	}%
	\DeclareBibliographyDriver{incollection}{%
		\usebibmacro{bibindex}%
		\usebibmacro{begentry}%
		\usebibmacro{my:core}%  ← your logic
		\usebibmacro{finentry}%
	}%
	\DeclareBibliographyDriver{book}{%
		\usebibmacro{bibindex}%
		\usebibmacro{begentry}%
		\usebibmacro{my:core}%  ← your logic
		\usebibmacro{finentry}%
	}%
	\DeclareBibliographyDriver{online}{%
		\usebibmacro{bibindex}%
		\usebibmacro{begentry}%
		\usebibmacro{my:online}%  ← your logic
		\usebibmacro{finentry}%
	}%
	\DeclareBibliographyDriver{patent}{%
		\usebibmacro{bibindex}%
		\usebibmacro{begentry}%
		\usebibmacro{my:reg}%  ← your logic
		\usebibmacro{finentry}%
	}%
}
\makeatother
